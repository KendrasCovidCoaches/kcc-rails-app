{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as ActiveStorage from '@rails/activestorage';\nimport Cookies from 'js-cookie';\nimport pluralize from 'pluralize';\nimport URI from 'urijs';\nimport stickybits from 'stickybits';\nimport './direct-upload';\nimport VolunteerGroups from './volunteer_groups';\nimport Project from './project';\nimport ProjectForm from './project_form';\nimport OfficeHour from './office_hour';\nimport OfficeHourForm from './office_hour_form';\nimport Resources from './resources';\nvar Covid = {\n  initialize: function initialize() {\n    $(document).on('turbolinks:load', function () {\n      $('#disable_funding_alert').click(function () {\n        Cookies.set('funding_alert', false, {\n          expires: 99999\n        });\n        $('#disable_funding_container').remove();\n      });\n      $('#disable_highlight_projects_alert').click(function () {\n        Cookies.set('highlight_projects_alert', false, {\n          expires: 99999\n        });\n        $('#disable_highlight_projects_container').remove();\n      });\n    });\n    VolunteerGroups.initialize();\n    ProjectForm.initialize();\n    Project.initialize();\n    Resources.initialize();\n    OfficeHour.initialize();\n    OfficeHourForm.initialize();\n  },\n  toggleFiltersOpen: function toggleFiltersOpen() {\n    var filtersOpen;\n\n    switch (Cookies.get('filters_open')) {\n      default:\n      case null:\n      case undefined:\n      case 'true':\n        filtersOpen = true;\n        break;\n\n      case false:\n      case 'false':\n        filtersOpen = false;\n        break;\n    }\n\n    Cookies.set('filters_open', !filtersOpen);\n  },\n  showModal: function showModal(headerHTML, bodyHTML, actions, icon) {\n    $(modal).attr('x-data', '{ open: false }');\n    var modal = $('#modal')[0];\n    $('#modal-header').html(headerHTML);\n    $('#modal-body').html(bodyHTML);\n    $('#modal-actions').html('');\n    var idx = 0;\n\n    var _iterator = _createForOfIteratorHelper(actions),\n        _step;\n\n    try {\n      var _loop = function _loop() {\n        var action = _step.value;\n        var actionHTML = '';\n\n        if (action.type == 'cancel') {\n          var text = action.text || I18n.t('cancel');\n          actionHTML = \"\\n<span class=\\\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\\\" id=\\\"modal_action_\".concat(idx, \"\\\">\\n  <button @click=\\\"open = false;\\\" type=\\\"button\\\" class=\\\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline transition ease-in-out duration-150 sm:text-sm sm:leading-5\\\">\\n    \").concat(text, \"\\n  </button>\\n</span>\\n\");\n        } else if (action.type == 'submit') {\n          actionHTML = \"\\n<span class=\\\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\\\" id=\\\"modal_action_\".concat(idx, \"\\\">\\n  <button type=\\\"button\\\" class=\\\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-primary-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-primary-500 focus:outline-none focus:border-primary-700 focus:shadow-outline-primary transition ease-in-out duration-150 sm:text-sm sm:leading-5\\\">\\n    \").concat(action.text, \"\\n  </button>\\n</span>\\n\");\n        } else if (action.type == 'danger') {\n          actionHTML = \"\\n<span class=\\\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\\\" id=\\\"modal_action_\".concat(idx, \"\\\">\\n  <button type=\\\"button\\\" class=\\\"inline-flex px-4 py-2 justify-center w-full rounded-md border border-red-200 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-50 focus:outline-none focus:border-red-300 focus:shadow-outline-red active:bg-red-200 transition ease-in-out duration-150 sm:text-sm sm:leading-5\\\">\\n    \").concat(action.text, \"\\n  </button>\\n</span>\\n\");\n        }\n\n        $('#modal-actions').prepend(actionHTML);\n\n        if (action.callback) {\n          $(\"#modal_action_\".concat(idx, \" button\")).click(function () {\n            return action.callback();\n          });\n        }\n\n        idx += 1;\n      };\n\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    var iconHTML = '';\n\n    if (icon == 'warning') {\n      iconHTML = \"\\n<svg class=\\\"h-6 w-6 text-orange-400\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\" viewBox=\\\"0 0 24 24\\\">\\n  <path stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\\\"/>\\n</svg>\";\n    }\n\n    $('#modal-icon').html(iconHTML);\n    $(modal).attr('x-data', '{ open: true }');\n  },\n  skillBadges: function skillBadges(items) {\n    var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'primary';\n    var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    var classes = '';\n\n    if (color == 'blue') {\n      classes = 'bg-blue-100 text-blue-800  bg-blue-300';\n    } else {\n      classes = 'bg-primary-50 text-primary-800  bg-primary-50';\n    }\n\n    var badgeHTML = \"<div class=\\\"flex flex-row flex-wrap space-x-right-2 space-y-top-2\\\">\\n      \".concat(items.map(function (item) {\n      return \"<div class=\\\"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium leading-5 flex-grow-0 flex-shrink-0 \".concat(classes, \"\\\" title=\").concat(title, \">\\n            <svg class=\\\"-ml-0.5 mr-1.5 h-2 w-2 text-primary-400\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 8 8\\\">\\n              <circle cx=\\\"4\\\" cy=\\\"4\\\" r=\\\"3\\\"></circle>\\n            </svg>\\n            \").concat(item, \"\\n          </div>\");\n    }).join(''), \"\\n     </div>\");\n    return badgeHTML;\n  },\n  keepFiltersSticky: function keepFiltersSticky() {\n    stickybits('.js-sticky-filter', {\n      stickyBitStickyOffset: 20\n    });\n  },\n  initFilter: function initFilter(label, filter, options, selected) {\n    return {\n      label: label,\n      options: options,\n      selected: selected,\n      open: false,\n      applyFilters: function applyFilters() {\n        this.open = false;\n        Covid.applyFiltersAndGo(filter, this.selected);\n      },\n      resetFilters: function resetFilters() {\n        this.selected = [];\n      },\n      selectAll: function selectAll() {\n        this.selected = this.options.map(function (item) {\n          return item[1];\n        });\n      },\n      selectedCount: function selectedCount() {\n        return this.selected.length > 0 ? this.selected.length : '';\n      },\n      toggleSelection: function toggleSelection(option) {\n        if (this.selected.indexOf(option) >= 0) {\n          this.selected = this.selected.filter(function (item) {\n            return item !== option;\n          });\n        } else {\n          this.selected.push(option);\n        }\n      },\n      isSelected: function isSelected(option) {\n        return this.selected.some(function (selected) {\n          return selected === option;\n        });\n      },\n      dropDownLabel: function dropDownLabel() {\n        return pluralize(this.label, this.selected.length);\n      }\n    };\n  },\n  applyFiltersAndGo: function applyFiltersAndGo(filter, values) {\n    var filterKey = \"\".concat(filter, \"[]\");\n    var uri = URI(window.location.toString());\n    var query = uri.search(true);\n    query[filterKey] = values;\n    uri.query(query);\n\n    if (uri.path() !== '/projects' && filter === 'project_types') {\n      uri.path('projects');\n    }\n\n    Turbolinks.visit(uri.readable());\n  },\n  ensureFileType: function ensureFileType() {\n    var elements = document.getElementsByClassName('js-projects-image-upload-field');\n\n    if (!elements || elements.length === 0) {\n      return;\n    }\n\n    var element = elements[0];\n    var fileName = element.value;\n    var idxDot = fileName.lastIndexOf(\".\") + 1;\n    var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();\n\n    if (!['jpg', 'jpeg', 'png'].includes(extFile)) {\n      element.value = null;\n      alert(I18n.t('only_jpg_and_png_files'));\n      return false;\n    }\n\n    return true;\n  }\n};\nexport default Covid;","map":{"version":3,"sources":["/Users/a_norton/Documents/Community_Connections/covid-volunteers/app/frontend/covid/covid.js"],"names":["ActiveStorage","Cookies","pluralize","URI","stickybits","VolunteerGroups","Project","ProjectForm","OfficeHour","OfficeHourForm","Resources","Covid","initialize","$","document","on","click","set","expires","remove","toggleFiltersOpen","filtersOpen","get","undefined","showModal","headerHTML","bodyHTML","actions","icon","modal","attr","html","idx","action","actionHTML","type","text","I18n","t","prepend","callback","iconHTML","skillBadges","items","color","title","classes","badgeHTML","map","item","join","keepFiltersSticky","stickyBitStickyOffset","initFilter","label","filter","options","selected","open","applyFilters","applyFiltersAndGo","resetFilters","selectAll","selectedCount","length","toggleSelection","option","indexOf","push","isSelected","some","dropDownLabel","values","filterKey","uri","window","location","toString","query","search","path","Turbolinks","visit","readable","ensureFileType","elements","getElementsByClassName","element","fileName","value","idxDot","lastIndexOf","extFile","substr","toLowerCase","includes","alert"],"mappings":"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","sourcesContent":["import * as ActiveStorage from '@rails/activestorage'\nimport Cookies from 'js-cookie'\nimport pluralize from 'pluralize'\nimport URI from 'urijs'\nimport stickybits from 'stickybits';\nimport './direct-upload'\nimport VolunteerGroups from './volunteer_groups'\nimport Project from './project'\nimport ProjectForm from './project_form'\nimport OfficeHour from './office_hour'\nimport OfficeHourForm from './office_hour_form'\nimport Resources from './resources'\n\nconst Covid = {\n  initialize() {\n    $(document).on('turbolinks:load', () => {\n      $('#disable_funding_alert').click(() => {\n        Cookies.set('funding_alert', false, { expires: 99999 })\n        $('#disable_funding_container').remove();\n      })\n\n      $('#disable_highlight_projects_alert').click(() => {\n        Cookies.set('highlight_projects_alert', false, { expires: 99999 })\n        $('#disable_highlight_projects_container').remove();\n      })\n    });\n\n    VolunteerGroups.initialize();\n    ProjectForm.initialize();\n    Project.initialize();\n    Resources.initialize();\n    OfficeHour.initialize();\n    OfficeHourForm.initialize();\n  },\n\n  toggleFiltersOpen() {\n    let filtersOpen;\n    switch (Cookies.get('filters_open')) {\n      default:\n      case null:\n      case undefined:\n      case 'true':\n        filtersOpen = true\n        break;\n      case false:\n      case 'false':\n        filtersOpen = false\n        break;\n    }\n    Cookies.set('filters_open', !filtersOpen);\n  },\n\n  showModal(headerHTML, bodyHTML, actions, icon) {\n    $(modal).attr('x-data', '{ open: false }');\n\n    const modal = $('#modal')[0];\n    $('#modal-header').html(headerHTML);\n    $('#modal-body').html(bodyHTML);\n\n    $('#modal-actions').html('');\n\n    let idx = 0;\n    for (const action of actions) {\n      let actionHTML = '';\n      if (action.type == 'cancel') {\n        const text = action.text || I18n.t('cancel');\n        actionHTML = `\n<span class=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\" id=\"modal_action_${idx}\">\n  <button @click=\"open = false;\" type=\"button\" class=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline transition ease-in-out duration-150 sm:text-sm sm:leading-5\">\n    ${text}\n  </button>\n</span>\n`;\n      } else if (action.type == 'submit') {\n        actionHTML = `\n<span class=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\" id=\"modal_action_${idx}\">\n  <button type=\"button\" class=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-primary-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-primary-500 focus:outline-none focus:border-primary-700 focus:shadow-outline-primary transition ease-in-out duration-150 sm:text-sm sm:leading-5\">\n    ${action.text}\n  </button>\n</span>\n`;\n      } else if (action.type == 'danger') {\n        actionHTML = `\n<span class=\"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:ml-3 sm:w-auto\" id=\"modal_action_${idx}\">\n  <button type=\"button\" class=\"inline-flex px-4 py-2 justify-center w-full rounded-md border border-red-200 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-50 focus:outline-none focus:border-red-300 focus:shadow-outline-red active:bg-red-200 transition ease-in-out duration-150 sm:text-sm sm:leading-5\">\n    ${action.text}\n  </button>\n</span>\n`;\n      }\n\n      $('#modal-actions').prepend(actionHTML);\n\n      if (action.callback) {\n        $(`#modal_action_${idx} button`).click(() => action.callback());\n      }\n\n      idx += 1;\n    }\n\n    let iconHTML = '';\n    if (icon == 'warning') {\n      iconHTML = `\n<svg class=\"h-6 w-6 text-orange-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 24 24\">\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"/>\n</svg>`;\n    }\n\n    $('#modal-icon').html(iconHTML);\n\n    $(modal).attr('x-data', '{ open: true }');\n  },\n\n  skillBadges(items, color = 'primary', title = '') {\n    let classes = '';\n    if (color == 'blue') {\n      classes = 'bg-blue-100 text-blue-800  bg-blue-300';\n    } else {\n      classes = 'bg-primary-50 text-primary-800  bg-primary-50';\n    }\n    const badgeHTML = `<div class=\"flex flex-row flex-wrap space-x-right-2 space-y-top-2\">\n      ${items.map(item =>\n      `<div class=\"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium leading-5 flex-grow-0 flex-shrink-0 ${classes}\" title=${title}>\n            <svg class=\"-ml-0.5 mr-1.5 h-2 w-2 text-primary-400\" fill=\"currentColor\" viewBox=\"0 0 8 8\">\n              <circle cx=\"4\" cy=\"4\" r=\"3\"></circle>\n            </svg>\n            ${item}\n          </div>`\n    ).join('')}\n     </div>`;\n    return badgeHTML\n  },\n  keepFiltersSticky() {\n    stickybits('.js-sticky-filter', { stickyBitStickyOffset: 20 })\n  },\n  initFilter(label, filter, options, selected) {\n    return {\n      label,\n      options,\n      selected,\n      open: false,\n      applyFilters() {\n        this.open = false\n        Covid.applyFiltersAndGo(filter, this.selected)\n      },\n      resetFilters() {\n        this.selected = []\n      },\n      selectAll() {\n        this.selected = this.options.map(item => item[1])\n      },\n      selectedCount() {\n        return this.selected.length > 0 ? this.selected.length : ''\n      },\n      toggleSelection(option) {\n        if (this.selected.indexOf(option) >= 0) {\n          this.selected = this.selected.filter(item => item !== option)\n        } else {\n          this.selected.push(option)\n        }\n      },\n      isSelected(option) {\n        return this.selected.some(selected => selected === option)\n      },\n      dropDownLabel() {\n        return pluralize(this.label, this.selected.length)\n      }\n    }\n  },\n  applyFiltersAndGo(filter, values) {\n    const filterKey = `${filter}[]`\n    const uri = URI(window.location.toString());\n    const query = uri.search(true)\n\n    query[filterKey] = values\n    uri.query(query)\n\n    if (uri.path() !== '/projects' && filter === 'project_types') {\n      uri.path('projects')\n    }\n\n    Turbolinks.visit(uri.readable())\n  },\n  ensureFileType() {\n    const elements = document.getElementsByClassName('js-projects-image-upload-field')\n    if (!elements || elements.length === 0) {\n      return\n    }\n    const element = elements[0]\n    const fileName = element.value;\n    const idxDot = fileName.lastIndexOf(\".\") + 1;\n    const extFile = fileName.substr(idxDot, fileName.length).toLowerCase();\n\n    if (!['jpg', 'jpeg', 'png'].includes(extFile)) {\n      element.value = null\n      alert(I18n.t('only_jpg_and_png_files'));\n      return false\n    }\n\n    return true\n  }\n};\n\nexport default Covid\n"]},"metadata":{},"sourceType":"module"}